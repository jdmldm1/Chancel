query GetSession($id: ID!) {
  session(id: $id) {
    id
    title
    description
    startDate
    endDate
    seriesId
    visibility
    sessionType
    videoCallUrl
    imageUrl
    series {
      id
      title
      imageUrl
    }
    leader {
      id
      name
      email
    }
    scripturePassages {
      id
      book
      chapter
      verseStart
      verseEnd
      content
      note
      order
      comments {
        id
        content
        createdAt
        verseNumber
        user {
          id
          name
        }
        parentId
        replies {
          id
          content
          createdAt
          verseNumber
          parentId
          user {
            id
            name
          }
          replies {
            id
            content
            createdAt
            verseNumber
            user {
              id
              name
            }
          }
        }
      }
    }
    participants {
      id
      user {
        id
        name
        role
      }
      joinedAt
      role
    }
    resources {
      id
      fileName
      fileUrl
      fileType
      resourceType
      videoId
      description
      createdAt
      uploader {
        id
        name
      }
    }
  }
}

query GetCommentsByPassage($passageId: ID!) {
  commentsByPassage(passageId: $passageId) {
    id
    content
    createdAt
    user {
      id
      name
    }
    parentId
    replies {
      id
      content
      createdAt
      user {
        id
        name
      }
    }
  }
}

mutation CreateComment($input: CreateCommentInput!) {
  createComment(input: $input) {
    id
    content
    createdAt
    verseNumber
    user {
      id
      name
    }
    passageId
    sessionId
    parentId
  }
}

mutation UpdateComment($id: ID!, $input: UpdateCommentInput!) {
  updateComment(id: $id, input: $input) {
    id
    content
    createdAt
    verseNumber
    user {
      id
      name
    }
    passageId
    sessionId
    parentId
  }
}

mutation DeleteComment($id: ID!) {
  deleteComment(id: $id)
}

mutation JoinSession($sessionId: ID!) {
  joinSession(sessionId: $sessionId) {
    id
    user {
      id
      name
    }
    joinedAt
    role
  }
}

mutation CreateSessionResource($input: CreateSessionResourceInput!) {
  createSessionResource(input: $input) {
    id
    fileName
    fileUrl
    fileType
    description
    createdAt
    uploader {
      id
      name
    }
  }
}

mutation DeleteSessionResource($id: ID!) {
  deleteSessionResource(id: $id)
}

# Subscription disabled - using HTTP polling via cache-and-network fetch policy
# subscription CommentAdded($sessionId: ID!) {
#   commentAdded(sessionId: $sessionId) {
#     id
#     content
#     createdAt
#     verseNumber
#     parentId
#     passageId
#     user {
#       id
#       name
#     }
#     replies {
#       id
#       content
#       createdAt
#       verseNumber
#       user {
#         id
#         name
#       }
#     }
#   }
# }
